<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard DKM - Pusat Informasi Masjid</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        .emerald-glow {
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800" x-data="masjidApp()">

<!-- App Container -->
<div id="app-container">

    <!-- ===== 1. PUBLIC PAGES ===== -->
    <div x-show="!isAdmin" x-transition.opacity>
        <!-- Public Navbar -->
        <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-40 shadow-sm">
            <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center space-x-3">
                        <div class="bg-emerald-500 text-white p-2 rounded-lg">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>
                        </div>
                        <a @click.prevent="navigate('home')" href="#" class="font-bold text-xl text-emerald-600">Masjid Al-Hikmah</a>
                    </div>
                    <div class="hidden md:flex items-center space-x-6">
                        <a @click.prevent="navigate('home')" href="#" class="text-slate-600 hover:text-emerald-600 transition-colors" :class="{ 'text-emerald-600 font-semibold': page === 'home' }">Home</a>
                        <a @click.prevent="navigate('kajian')" href="#" class="text-slate-600 hover:text-emerald-600 transition-colors" :class="{ 'text-emerald-600 font-semibold': page.startsWith('kajian') }">Kajian</a>
                        <a @click.prevent="navigate('laporan')" href="#" class="text-slate-600 hover:text-emerald-600 transition-colors" :class="{ 'text-emerald-600 font-semibold': page === 'laporan' }">Laporan</a>
                        <div class="flex items-center space-x-2">
                            <a x-show="!isLoggedIn" @click.prevent="navigate('login')" href="#" class="bg-emerald-50 text-emerald-600 px-4 py-2 rounded-lg text-sm font-semibold hover:bg-emerald-100 transition-colors">Login</a>
                            <a x-show="!isLoggedIn" @click.prevent="navigate('register')" href="#" class="bg-emerald-500 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-emerald-600 transition-colors">Register</a>
                            <div x-show="isLoggedIn" class="relative" x-data="{ open: false }">
                                <button @click="open = !open" class="flex items-center space-x-2">
                                    <img src="https://placehold.co/40x40/E2E8F0/475569?text=U" alt="User" class="w-8 h-8 rounded-full">
                                    <span class="text-slate-600 font-medium text-sm hidden sm:inline">User</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-slate-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                                </button>
                                <div x-show="open" @click.away="open = false" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-1" x-transition>
                                    <a @click.prevent="navigate('profil')" href="#" class="block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100">Profil Saya</a>
                                    <a @click.prevent="loginAdmin()" href="#" class="block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100">Dashboard Admin</a>
                                    <a @click.prevent="logout()" href="#" class="block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100">Logout</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="md:hidden">
                        <button @click="mobileMenuOpen = !mobileMenuOpen">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
                        </button>
                    </div>
                </div>
            </nav>
            <!-- Mobile Menu -->
            <div x-show="mobileMenuOpen" class="md:hidden" x-transition>
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <a @click.prevent="navigate('home'); mobileMenuOpen = false;" href="#" class="block px-3 py-2 rounded-md text-base font-medium" :class="page === 'home' ? 'text-white bg-emerald-500' : 'text-slate-600 hover:bg-slate-100'">Home</a>
                    <a @click.prevent="navigate('kajian'); mobileMenuOpen = false;" href="#" class="block px-3 py-2 rounded-md text-base font-medium" :class="page.startsWith('kajian') ? 'text-white bg-emerald-500' : 'text-slate-600 hover:bg-slate-100'">Kajian</a>
                    <a @click.prevent="navigate('laporan'); mobileMenuOpen = false;" href="#" class="block px-3 py-2 rounded-md text-base font-medium" :class="page === 'laporan' ? 'text-white bg-emerald-500' : 'text-slate-600 hover:bg-slate-100'">Laporan</a>
                    <div class="border-t border-slate-200 my-2"></div>
                    <div x-show="!isLoggedIn">
                        <a @click.prevent="navigate('login'); mobileMenuOpen = false;" href="#" class="block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:bg-slate-100">Login</a>
                        <a @click.prevent="navigate('register'); mobileMenuOpen = false;" href="#" class="block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:bg-slate-100">Register</a>
                    </div>
                    <div x-show="isLoggedIn">
                        <a @click.prevent="navigate('profil'); mobileMenuOpen = false;" href="#" class="block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:bg-slate-100">Profil Saya</a>
                        <a @click.prevent="loginAdmin(); mobileMenuOpen = false;" href="#" class="block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:bg-slate-100">Dashboard Admin</a>
                        <a @click.prevent="logout(); mobileMenuOpen = false;" href="#" class="block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:bg-slate-100">Logout</a>
                    </div>
                </div>
            </div>
        </header>

        <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
            <!-- Home Page -->
            <div x-show="page === 'home'" x-transition.opacity>
                <!-- Hero Section -->
                <section class="text-center bg-white p-8 md:p-16 rounded-2xl shadow-sm mb-12">
                    <h1 class="text-4xl md:text-5xl font-bold text-emerald-600 mb-4">Selamat Datang di Masjid Al-Hikmah</h1>
                    <p class="max-w-3xl mx-auto text-slate-500 text-lg">Pusat informasi kegiatan, kajian, dan transparansi keuangan untuk kemudahan jamaah.</p>
                    <div class="mt-8">
                        <img src="https://placehold.co/1000x400/10B981/FFFFFF?text=Ilustrasi+Masjid" alt="Ilustrasi Masjid Al-Hikmah" class="w-full h-auto object-cover rounded-xl shadow-lg">
                    </div>
                </section>
                <!-- Kajian Terdekat Section -->
                <section>
                    <h2 class="text-3xl font-bold mb-6 text-center">Kajian Terdekat</h2>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <!-- Card Kajian -->
                        <template x-for="kajian in upcomingKajian" :key="kajian.id">
                            <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300 transform hover:-translate-y-1">
                                <div class="p-6">
                                    <div class="uppercase tracking-wide text-sm text-emerald-500 font-semibold" x-text="kajian.kategori"></div>
                                    <a @click.prevent="navigate('kajian_detail', kajian.id)" href="#" class="block mt-1 text-xl leading-tight font-bold text-slate-900 hover:underline" x-text="kajian.judul"></a>
                                    <p class="mt-2 text-slate-500" x-text="kajian.ustadz"></p>
                                    <div class="mt-4 flex items-center text-sm text-slate-600">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-emerald-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" /></svg>
                                        <span x-text="kajian.tanggal + ' - ' + kajian.waktu"></span>
                                    </div>
                                    <button @click.prevent="navigate('kajian_detail', kajian.id)" class="mt-6 w-full bg-emerald-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-emerald-600 transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2">
                                        Lihat Detail
                                    </button>
                                </div>
                            </div>
                        </template>
                    </div>
                </section>
            </div>

            <!-- Kajian List Page -->
            <div x-show="page === 'kajian'" x-transition.opacity>
                <h1 class="text-3xl font-bold mb-6">Jadwal Kajian</h1>
                <div class="mb-6">
                    <input type="text" placeholder="Cari kajian berdasarkan judul..." class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500">
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <template x-for="kajian in allKajian" :key="kajian.id">
                        <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300 transform hover:-translate-y-1">
                            <div class="p-6">
                                <div class="uppercase tracking-wide text-sm text-emerald-500 font-semibold" x-text="kajian.kategori"></div>
                                <a @click.prevent="navigate('kajian_detail', kajian.id)" href="#" class="block mt-1 text-xl leading-tight font-bold text-slate-900 hover:underline" x-text="kajian.judul"></a>
                                <p class="mt-2 text-slate-500" x-text="kajian.ustadz"></p>
                                <div class="mt-4 flex items-center text-sm text-slate-600">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-emerald-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" /></svg>
                                    <span x-text="kajian.tanggal + ' - ' + kajian.waktu"></span>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </div>

            <!-- Kajian Detail Page -->
            <div x-show="page === 'kajian_detail'" x-transition.opacity>
                <button @click="navigate('kajian')" class="flex items-center text-slate-600 hover:text-emerald-600 mb-6 font-medium">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                    Kembali ke Daftar Kajian
                </button>
                <div class="bg-white rounded-2xl shadow-lg p-8 md:p-12">
                    <div class="uppercase tracking-wide text-sm text-emerald-500 font-semibold" x-text="selectedKajian?.kategori"></div>
                    <h1 class="text-4xl font-bold text-slate-900 mt-2" x-text="selectedKajian?.judul"></h1>
                    <p class="text-xl text-slate-600 mt-2" x-text="selectedKajian?.ustadz"></p>

                    <div class="flex flex-wrap gap-x-8 gap-y-4 mt-8 text-slate-700">
                        <div class="flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-emerald-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" /></svg>
                            <span x-text="selectedKajian?.tanggal"></span>
                        </div>
                        <div class="flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-emerald-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" /></svg>
                            <span x-text="selectedKajian?.waktu"></span>
                        </div>
                        <div class="flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-emerald-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" /></svg>
                            <span>Ruang Utama, Masjid Al-Hikmah</span>
                        </div>
                    </div>

                    <div class="prose max-w-none mt-8 text-slate-600" x-html="selectedKajian?.deskripsi"></div>

                    <div class="mt-10 pt-6 border-t border-slate-200">
                        <div x-show="!isLoggedIn">
                            <p class="text-center text-slate-500">Silakan <a @click.prevent="navigate('login')" href="#" class="text-emerald-600 font-semibold hover:underline">login</a> untuk mendaftar kajian ini.</p>
                        </div>
                        <div x-show="isLoggedIn">
                            <button x-show="!isUserRegistered(selectedKajian?.id)" @click="registerKajian(selectedKajian?.id)" class="w-full sm:w-auto bg-emerald-500 text-white px-8 py-3 rounded-lg font-semibold hover:bg-emerald-600 transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2">
                                Daftar Acara
                            </button>
                            <button x-show="isUserRegistered(selectedKajian?.id)" @click="unregisterKajian(selectedKajian?.id)" class="w-full sm:w-auto bg-red-100 text-red-600 px-8 py-3 rounded-lg font-semibold hover:bg-red-200 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
                                Batalkan Pendaftaran
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Laporan Page -->
            <div x-show="page === 'laporan'" x-transition.opacity>
                <h1 class="text-3xl font-bold mb-6">Laporan Keuangan</h1>
                <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left text-slate-500">
                            <thead class="text-xs text-slate-700 uppercase bg-slate-100">
                            <tr>
                                <th scope="col" class="px-6 py-3">Tanggal</th>
                                <th scope="col" class="px-6 py-3">Keterangan</th>
                                <th scope="col" class="px-6 py-3">Kategori</th>
                                <th scope="col" class="px-6 py-3 text-right">Pemasukan</th>
                                <th scope="col" class="px-6 py-3 text-right">Pengeluaran</th>
                                <th scope="col" class="px-6 py-3 text-center">Bukti</th>
                            </tr>
                            </thead>
                            <tbody>
                            <template x-for="trx in transactions" :key="trx.id">
                                <tr class="bg-white border-b hover:bg-slate-50">
                                    <td class="px-6 py-4" x-text="trx.tanggal"></td>
                                    <th scope="row" class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap" x-text="trx.keterangan"></th>
                                    <td class="px-6 py-4">
                                        <span class="px-2 py-1 text-xs font-medium rounded-full" :class="trx.kategori === 'Infaq' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'" x-text="trx.kategori"></span>
                                    </td>
                                    <td class="px-6 py-4 text-right font-medium text-green-600" x-text="trx.pemasukan ? formatCurrency(trx.pemasukan) : '-'"></td>
                                    <td class="px-6 py-4 text-right font-medium text-red-600" x-text="trx.pengeluaran ? formatCurrency(trx.pengeluaran) : '-'"></td>
                                    <td class="px-6 py-4 text-center">
                                        <a x-show="trx.bukti" href="#" class="font-medium text-emerald-600 hover:underline">Lihat</a>
                                        <span x-show="!trx.bukti" class="text-slate-400">-</span>
                                    </td>
                                </tr>
                            </template>
                            </tbody>
                            <tfoot class="bg-slate-100">
                            <tr class="font-semibold text-slate-900">
                                <th scope="row" colspan="3" class="px-6 py-3 text-base">Total Saldo</th>
                                <td class="px-6 py-3 text-right text-green-600" x-text="formatCurrency(totalPemasukan)"></td>
                                <td class="px-6 py-3 text-right text-red-600" x-text="formatCurrency(totalPengeluaran)"></td>
                                <td class="px-6 py-3 text-center font-bold text-lg text-emerald-700" x-text="formatCurrency(totalPemasukan - totalPengeluaran)"></td>
                            </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Login Page -->
            <div x-show="page === 'login'" x-transition.opacity class="flex items-center justify-center py-12">
                <div class="w-full max-w-md">
                    <div class="bg-white rounded-2xl shadow-xl p-8">
                        <div class="text-center mb-8">
                            <h1 class="text-3xl font-bold text-emerald-600">Login</h1>
                            <p class="text-slate-500">Masuk untuk mengakses fitur jamaah.</p>
                        </div>
                        <form @submit.prevent="login()">
                            <div class="space-y-4">
                                <div>
                                    <label for="email" class="block text-sm font-medium text-slate-700">Email</label>
                                    <input type="email" id="email" class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-lg shadow-sm placeholder-slate-400 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500" placeholder="nama@email.com" required>
                                </div>
                                <div>
                                    <label for="password" class="block text-sm font-medium text-slate-700">Password</label>
                                    <input type="password" id="password" class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-lg shadow-sm placeholder-slate-400 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500" placeholder="••••••••" required>
                                </div>
                            </div>
                            <div class="mt-6">
                                <button type="submit" class="w-full bg-emerald-500 text-white px-4 py-3 rounded-lg font-semibold hover:bg-emerald-600 transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2">Login</button>
                            </div>
                            <p class="text-center text-sm text-slate-500 mt-6">
                                Belum punya akun? <a @click.prevent="navigate('register')" href="#" class="font-medium text-emerald-600 hover:underline">Register di sini</a>
                            </p>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Register Page -->
            <div x-show="page === 'register'" x-transition.opacity class="flex items-center justify-center py-12">
                <div class="w-full max-w-md">
                    <div class="bg-white rounded-2xl shadow-xl p-8">
                        <div class="text-center mb-8">
                            <h1 class="text-3xl font-bold text-emerald-600">Register</h1>
                            <p class="text-slate-500">Buat akun baru untuk mendaftar kajian.</p>
                        </div>
                        <form @submit.prevent="login()">
                            <div class="space-y-4">
                                <div>
                                    <label for="nama" class="block text-sm font-medium text-slate-700">Nama Lengkap</label>
                                    <input type="text" id="nama" class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-lg" placeholder="Nama Anda" required>
                                </div>
                                <div>
                                    <label for="email_reg" class="block text-sm font-medium text-slate-700">Email</label>
                                    <input type="email" id="email_reg" class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-lg" placeholder="nama@email.com" required>
                                </div>
                                <div>
                                    <label for="password_reg" class="block text-sm font-medium text-slate-700">Password</label>
                                    <input type="password" id="password_reg" class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-lg" placeholder="••••••••" required>
                                </div>
                                <div>
                                    <label for="password_conf" class="block text-sm font-medium text-slate-700">Konfirmasi Password</label>
                                    <input type="password" id="password_conf" class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-lg" placeholder="••••••••" required>
                                </div>
                            </div>
                            <div class="mt-6">
                                <button type="submit" class="w-full bg-emerald-500 text-white px-4 py-3 rounded-lg font-semibold hover:bg-emerald-600 transition-colors">Register</button>
                            </div>
                            <p class="text-center text-sm text-slate-500 mt-6">
                                Sudah punya akun? <a @click.prevent="navigate('login')" href="#" class="font-medium text-emerald-600 hover:underline">Login di sini</a>
                            </p>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Profile Page -->
            <div x-show="page === 'profil'" x-transition.opacity>
                <h1 class="text-3xl font-bold mb-6">Profil Saya</h1>
                <div class="grid lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-1">
                        <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                            <img src="https://placehold.co/128x128/E2E8F0/475569?text=U" alt="User Profile" class="w-32 h-32 rounded-full mx-auto mb-4">
                            <h2 class="text-2xl font-bold text-slate-900">User Jamaah</h2>
                            <p class="text-slate-500">user.jamaah@email.com</p>
                            <button class="mt-4 w-full bg-slate-100 text-slate-700 px-4 py-2 rounded-lg font-semibold hover:bg-slate-200 transition-colors">Edit Profil</button>
                        </div>
                    </div>
                    <div class="lg:col-span-2">
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <h3 class="text-xl font-bold text-slate-900 mb-4">Kajian yang Saya Ikuti</h3>
                            <div class="space-y-4">
                                <template x-if="userRegisteredKajian.length === 0">
                                    <p class="text-slate-500 text-center py-8">Anda belum mendaftar kajian apapun.</p>
                                </template>
                                <template x-for="kajian in userRegisteredKajian" :key="kajian.id">
                                    <div class="flex items-center justify-between p-4 border border-slate-200 rounded-lg">
                                        <div>
                                            <a @click.prevent="navigate('kajian_detail', kajian.id)" href="#" class="font-semibold text-slate-800 hover:text-emerald-600" x-text="kajian.judul"></a>
                                            <p class="text-sm text-slate-500" x-text="kajian.ustadz + ' - ' + kajian.tanggal"></p>
                                        </div>
                                        <button @click="unregisterKajian(kajian.id)" class="text-sm text-red-500 hover:text-red-700 font-medium">Batalkan</button>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- ===== 2. ADMIN DASHBOARD ===== -->
    <div x-show="isAdmin" class="flex h-screen bg-slate-100" x-transition.opacity>
        <!-- Sidebar -->
        <aside :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full'" class="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform md:relative md:translate-x-0 transition-transform duration-300 ease-in-out">
            <div class="flex items-center justify-center h-16 border-b">
                <div class="flex items-center space-x-3">
                    <div class="bg-emerald-500 text-white p-2 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>
                    </div>
                    <span class="font-bold text-xl text-emerald-600">Admin DKM</span>
                </div>
            </div>
            <nav class="py-4">
                <a @click.prevent="navigate('admin_dashboard')" href="#" class="flex items-center px-6 py-3 text-slate-600" :class="page === 'admin_dashboard' ? 'bg-emerald-50 text-emerald-600 border-r-4 border-emerald-500' : 'hover:bg-slate-50'">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" viewBox="0 0 20 20" fill="currentColor"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" /></svg>
                    Dashboard
                </a>
                <a @click.prevent="navigate('admin_kajian')" href="#" class="flex items-center px-6 py-3 text-slate-600" :class="page === 'admin_kajian' ? 'bg-emerald-50 text-emerald-600 border-r-4 border-emerald-500' : 'hover:bg-slate-50'">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" viewBox="0 0 20 20" fill="currentColor"><path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.346.617l.41 2.338a1 1 0 00.976.851h.005l.41-2.338a1 1 0 01.346-.617L10 6.182l2.69 1.226a1 1 0 01.346.617l.41 2.338a1 1 0 00.976.851h.005l.41-2.338a1 1 0 01.346-.617l2.87-1.305a1 1 0 000-1.84l-7-3zM3 14a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" /></svg>
                    Manajemen Kajian
                </a>
                <a @click.prevent="navigate('admin_laporan')" href="#" class="flex items-center px-6 py-3 text-slate-600" :class="page === 'admin_laporan' ? 'bg-emerald-50 text-emerald-600 border-r-4 border-emerald-500' : 'hover:bg-slate-50'">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" viewBox="0 0 20 20" fill="currentColor"><path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z" /><path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm3 0a1 1 0 011-1h1a1 1 0 110 2H8a1 1 0 01-1-1z" clip-rule="evenodd" /></svg>
                    Manajemen Keuangan
                </a>
                <a @click.prevent="navigate('admin_data_master')" href="#" class="flex items-center px-6 py-3 text-slate-600" :class="page === 'admin_data_master' ? 'bg-emerald-50 text-emerald-600 border-r-4 border-emerald-500' : 'hover:bg-slate-50'">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" viewBox="0 0 20 20" fill="currentColor"><path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1z" /></svg>
                    Data Master
                </a>
            </nav>
        </aside>
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="flex items-center justify-between h-16 bg-white border-b px-6">
                <button @click="sidebarOpen = !sidebarOpen" class="md:hidden text-slate-500 focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                </button>
                <div class="flex-1"></div>
                <div class="flex items-center">
                    <div x-data="{ open: false }" class="relative">
                        <button @click="open = !open" class="flex items-center space-x-2">
                            <img src="https://placehold.co/40x40/10B981/FFFFFF?text=A" alt="Admin" class="w-8 h-8 rounded-full">
                            <span class="text-slate-600 font-medium text-sm hidden sm:inline">Admin DKM</span>
                        </button>
                        <div x-show="open" @click.away="open = false" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-1 z-10" x-transition>
                            <a @click.prevent="logoutAdmin()" href="#" class="block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100">Logout</a>
                        </div>
                    </div>
                </div>
            </header>
            <!-- Main Content -->
            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-slate-100 p-6">
                <!-- Admin Dashboard -->
                <div x-show="page === 'admin_dashboard'" x-transition.opacity>
                    <h1 class="text-2xl font-semibold text-slate-800 mb-6">Dashboard</h1>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow-sm flex items-center justify-between">
                            <div>
                                <p class="text-sm text-slate-500">Total Kajian</p>
                                <p class="text-3xl font-bold text-slate-800" x-text="allKajian.length"></p>
                            </div>
                            <div class="bg-emerald-100 text-emerald-600 p-3 rounded-full">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-sm flex items-center justify-between">
                            <div>
                                <p class="text-sm text-slate-500">Total Ustadz</p>
                                <p class="text-3xl font-bold text-slate-800">4</p>
                            </div>
                            <div class="bg-blue-100 text-blue-600 p-3 rounded-full">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-sm flex items-center justify-between">
                            <div>
                                <p class="text-sm text-slate-500">Total Jamaah</p>
                                <p class="text-3xl font-bold text-slate-800">125</p>
                            </div>
                            <div class="bg-indigo-100 text-indigo-600 p-3 rounded-full">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-sm flex items-center justify-between">
                            <div>
                                <p class="text-sm text-slate-500">Total Transaksi</p>
                                <p class="text-3xl font-bold text-slate-800" x-text="transactions.length"></p>
                            </div>
                            <div class="bg-yellow-100 text-yellow-600 p-3 rounded-full">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Admin Manajemen Kajian -->
                <div x-show="page === 'admin_kajian'" x-transition.opacity>
                    <div class="flex items-center justify-between mb-6">
                        <h1 class="text-2xl font-semibold text-slate-800">Manajemen Kajian</h1>
                        <button class="bg-emerald-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-emerald-600 transition-colors">Tambah Kajian</button>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm overflow-x-auto">
                        <table class="w-full text-sm text-left text-slate-500">
                            <thead class="text-xs text-slate-700 uppercase bg-slate-50">
                            <tr>
                                <th scope="col" class="px-6 py-3">Judul</th>
                                <th scope="col" class="px-6 py-3">Ustadz</th>
                                <th scope="col" class="px-6 py-3">Waktu</th>
                                <th scope="col" class="px-6 py-3">Kategori</th>
                                <th scope="col" class="px-6 py-3 text-right">Aksi</th>
                            </tr>
                            </thead>
                            <tbody>
                            <template x-for="kajian in allKajian" :key="kajian.id">
                                <tr class="bg-white border-b hover:bg-slate-50">
                                    <th class="px-6 py-4 font-medium text-slate-900" x-text="kajian.judul"></th>
                                    <td class="px-6 py-4" x-text="kajian.ustadz"></td>
                                    <td class="px-6 py-4" x-text="kajian.tanggal"></td>
                                    <td class="px-6 py-4" x-text="kajian.kategori"></td>
                                    <td class="px-6 py-4 text-right">
                                        <a href="#" class="font-medium text-emerald-600 hover:underline mr-4">Edit</a>
                                        <a href="#" class="font-medium text-red-600 hover:underline">Hapus</a>
                                    </td>
                                </tr>
                            </template>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Admin Manajemen Keuangan -->
                <div x-show="page === 'admin_laporan'" x-transition.opacity>
                    <div class="flex items-center justify-between mb-6">
                        <h1 class="text-2xl font-semibold text-slate-800">Manajemen Keuangan</h1>
                        <button class="bg-emerald-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-emerald-600 transition-colors">Tambah Transaksi</button>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm overflow-x-auto">
                        <table class="w-full text-sm text-left text-slate-500">
                            <thead class="text-xs text-slate-700 uppercase bg-slate-50">
                            <tr>
                                <th scope="col" class="px-6 py-3">Tanggal</th>
                                <th scope="col" class="px-6 py-3">Keterangan</th>
                                <th scope="col" class="px-6 py-3">Pemasukan</th>
                                <th scope="col" class="px-6 py-3">Pengeluaran</th>
                                <th scope="col" class="px-6 py-3">Bukti</th>
                                <th scope="col" class="px-6 py-3 text-right">Aksi</th>
                            </tr>
                            </thead>
                            <tbody>
                            <template x-for="trx in transactions" :key="trx.id">
                                <tr class="bg-white border-b hover:bg-slate-50">
                                    <td class="px-6 py-4" x-text="trx.tanggal"></td>
                                    <th scope="row" class="px-6 py-4 font-medium text-slate-900" x-text="trx.keterangan"></th>
                                    <td class="px-6 py-4 text-green-600" x-text="trx.pemasukan ? formatCurrency(trx.pemasukan) : '-'"></td>
                                    <td class="px-6 py-4 text-red-600" x-text="trx.pengeluaran ? formatCurrency(trx.pengeluaran) : '-'"></td>
                                    <td class="px-6 py-4"><a x-show="trx.bukti" href="#" class="font-medium text-emerald-600 hover:underline">Lihat</a></td>
                                    <td class="px-6 py-4 text-right">
                                        <a href="#" class="font-medium text-emerald-600 hover:underline mr-4">Edit</a>
                                        <a href="#" class="font-medium text-red-600 hover:underline">Hapus</a>
                                    </td>
                                </tr>
                            </template>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Admin Data Master -->
                <div x-show="page === 'admin_data_master'" x-transition.opacity>
                    <h1 class="text-2xl font-semibold text-slate-800 mb-6">Manajemen Data Master</h1>
                    <div class="grid lg:grid-cols-2 gap-8">
                        <!-- Ustadz -->
                        <div>
                            <div class="flex items-center justify-between mb-4">
                                <h2 class="text-lg font-semibold text-slate-700">Data Ustadz</h2>
                                <button class="bg-emerald-500 text-white px-3 py-1 rounded-lg text-sm font-semibold hover:bg-emerald-600">Tambah</button>
                            </div>
                            <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                                <ul class="divide-y divide-slate-200">
                                    <li class="px-4 py-3 flex justify-between items-center"><div>Ustadz Abdul Somad</div><div class="space-x-2"><a href="#" class="text-emerald-600 text-sm">Edit</a><a href="#" class="text-red-600 text-sm">Hapus</a></div></li>
                                    <li class="px-4 py-3 flex justify-between items-center"><div>Ustadz Adi Hidayat</div><div class="space-x-2"><a href="#" class="text-emerald-600 text-sm">Edit</a><a href="#" class="text-red-600 text-sm">Hapus</a></div></li>
                                </ul>
                            </div>
                        </div>
                        <!-- Kategori Kajian -->
                        <div>
                            <div class="flex items-center justify-between mb-4">
                                <h2 class="text-lg font-semibold text-slate-700">Kategori Kajian</h2>
                                <button class="bg-emerald-500 text-white px-3 py-1 rounded-lg text-sm font-semibold hover:bg-emerald-600">Tambah</button>
                            </div>
                            <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                                <ul class="divide-y divide-slate-200">
                                    <li class="px-4 py-3 flex justify-between items-center"><div>Tafsir</div><div class="space-x-2"><a href="#" class="text-emerald-600 text-sm">Edit</a><a href="#" class="text-red-600 text-sm">Hapus</a></div></li>
                                    <li class="px-4 py-3 flex justify-between items-center"><div>Fiqih</div><div class="space-x-2"><a href="#" class="text-emerald-600 text-sm">Edit</a><a href="#" class="text-red-600 text-sm">Hapus</a></div></li>
                                    <li class="px-4 py-3 flex justify-between items-center"><div>Hadits</div><div class="space-x-2"><a href="#" class="text-emerald-600 text-sm">Edit</a><a href="#" class="text-red-600 text-sm">Hapus</a></div></li>
                                </ul>
                            </div>
                        </div>
                        <!-- Kategori Transaksi -->
                        <div class="lg:col-span-2">
                            <div class="flex items-center justify-between mb-4">
                                <h2 class="text-lg font-semibold text-slate-700">Kategori Transaksi</h2>
                                <button class="bg-emerald-500 text-white px-3 py-1 rounded-lg text-sm font-semibold hover:bg-emerald-600">Tambah</button>
                            </div>
                            <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                                <ul class="divide-y divide-slate-200">
                                    <li class="px-4 py-3 flex justify-between items-center"><div>Infaq</div><div class="space-x-2"><a href="#" class="text-emerald-600 text-sm">Edit</a><a href="#" class="text-red-600 text-sm">Hapus</a></div></li>
                                    <li class="px-4 py-3 flex justify-between items-center"><div>Operasional</div><div class="space-x-2"><a href="#" class="text-emerald-600 text-sm">Edit</a><a href="#" class="text-red-600 text-sm">Hapus</a></div></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

</div>

<script>
    function masjidApp() {
        return {
            // State
            page: 'home',
            pageId: null,
            isAdmin: false,
            isLoggedIn: false,
            mobileMenuOpen: false,
            sidebarOpen: false,
            selectedKajian: null,
            userRegisteredIds: [2],

            // Mock Data
            allKajian: [
                { id: 1, judul: 'Tafsir Surat Al-Fatihah: Makna dan Keutamaannya', ustadz: 'Ustadz Abdul Somad, Lc., M.A.', tanggal: '30 Sep 2025', waktu: 'Ba\'da Maghrib', kategori: 'Tafsir', deskripsi: '<p>Kajian mendalam mengenai tafsir Surat Al-Fatihah, membahas setiap ayat, makna yang terkandung, serta keutamaan membacanya dalam shalat dan kehidupan sehari-hari. Cocok untuk semua kalangan yang ingin memperdalam pemahaman Al-Qur\'an.</p><p class="mt-4">Jamaah diharapkan membawa mushaf Al-Qur\'an masing-masing untuk mengikuti pembahasan.</p>' },
                { id: 2, judul: 'Fiqih Muamalah: Jual Beli yang Sesuai Syariat', ustadz: 'Ustadz Dr. Adi Hidayat, Lc., M.A.', tanggal: '02 Okt 2025', waktu: '09:00 WIB', kategori: 'Fiqih', deskripsi: '<p>Pembahasan lengkap mengenai prinsip-prinsip jual beli dalam Islam. Mulai dari rukun, syarat, hingga contoh transaksi modern seperti jual beli online dan dropshipping. Sangat relevan untuk para pengusaha dan siapa saja yang berinteraksi dalam jual beli.</p>' },
                { id: 3, judul: 'Kajian Hadits Arbain: Niat dan Ikhlas', ustadz: 'Ustadz Salim A. Fillah', tanggal: '05 Okt 2025', waktu: 'Ba\'da Isya', kategori: 'Hadits', deskripsi: '<p>Mengupas hadits pertama dari kitab Arbain An-Nawawiyah, "Innamal a\'malu binniyat". Kajian ini akan membahas pentingnya niat yang lurus dan ikhlas dalam setiap amalan agar diterima oleh Allah SWT.</p>' },
                { id: 4, judul: 'Sirah Nabawiyah: Kelahiran Sang Nabi Akhir Zaman', ustadz: 'Ustadz Budi Ashari, Lc.', tanggal: '10 Okt 2025', waktu: 'Ba\'da Subuh', kategori: 'Sirah', deskripsi: '<p>Menelusuri kembali jejak sejarah kelahiran Nabi Muhammad SAW, peristiwa-peristiwa luar biasa yang mengiringinya, dan hikmah yang dapat diambil untuk kehidupan kita saat ini.</p>' },
            ],
            transactions: [
                { id: 1, tanggal: '28 Sep 2025', keterangan: 'Infaq Kotak Amal Jumat', kategori: 'Infaq', pemasukan: 5250000, pengeluaran: null, bukti: true },
                { id: 2, tanggal: '27 Sep 2025', keterangan: 'Pembayaran Listrik & Air Bulan September', kategori: 'Operasional', pemasukan: null, pengeluaran: 1250000, bukti: true },
                { id: 3, tanggal: '26 Sep 2025', keterangan: 'Pembelian Karpet Baru Ruang Utama', kategori: 'Operasional', pemasukan: null, pengeluaran: 3500000, bukti: true },
                { id: 4, tanggal: '25 Sep 2025', keterangan: 'Donasi dari Hamba Allah', kategori: 'Infaq', pemasukan: 2000000, pengeluaran: null, bukti: false },
            ],

            // Computed Properties / Getters
            get upcomingKajian() {
                return this.allKajian.slice(0, 3);
            },
            get totalPemasukan() {
                return this.transactions.reduce((acc, trx) => acc + (trx.pemasukan || 0), 0);
            },
            get totalPengeluaran() {
                return this.transactions.reduce((acc, trx) => acc + (trx.pengeluaran || 0), 0);
            },
            get userRegisteredKajian() {
                return this.allKajian.filter(k => this.userRegisteredIds.includes(k.id));
            },

            // Methods
            init() {
                // Simple hash routing
                const updatePage = () => {
                    const hash = window.location.hash.replace('#', '');
                    if (hash) {
                        const [page, id] = hash.split('/');
                        this.page = id ? `${page}_detail` : page;
                        this.pageId = id ? parseInt(id) : null;
                        if (this.page.startsWith('admin')) {
                            this.isAdmin = true;
                        } else {
                            this.isAdmin = false;
                        }
                    } else {
                        this.page = 'home';
                        this.isAdmin = false;
                    }
                    this.updateSelectedKajian();
                    window.scrollTo(0, 0);
                };
                window.addEventListener('hashchange', updatePage);
                updatePage(); // initial load
            },
            navigate(newPage, id = null) {
                window.location.hash = id ? `${newPage.replace('_detail', '')}/${id}` : newPage;
            },
            updateSelectedKajian() {
                if (this.page === 'kajian_detail' && this.pageId) {
                    this.selectedKajian = this.allKajian.find(k => k.id === this.pageId) || null;
                }
            },
            formatCurrency(value) {
                return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(value);
            },
            login() {
                this.isLoggedIn = true;
                this.navigate('home');
            },
            logout() {
                this.isLoggedIn = false;
                this.navigate('home');
            },
            loginAdmin() {
                this.isLoggedIn = true;
                this.isAdmin = true;
                this.navigate('admin_dashboard');
            },
            logoutAdmin() {
                this.isLoggedIn = true;
                this.isAdmin = false;
                this.navigate('home');
            },
            isUserRegistered(kajianId) {
                return this.userRegisteredIds.includes(kajianId);
            },
            registerKajian(kajianId) {
                if (!this.isUserRegistered(kajianId)) {
                    this.userRegisteredIds.push(kajianId);
                }
            },
            unregisterKajian(kajianId) {
                this.userRegisteredIds = this.userRegisteredIds.filter(id => id !== kajianId);
            }
        }
    }
</script>
</body>
</html>
